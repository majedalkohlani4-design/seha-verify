<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منصة صحة | طباعة تقرير إجازة مرضية</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* تنسيق الموقع العام - لا يظهر في الطباعة */
        body { background-color: #f4f7f6; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .no-print { display: block; }
        .header-web { background: white; padding: 10px 5%; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #2c5ba3; }
        .hero-web { text-align: center; padding: 50px 20px; }
        .search-card { background: white; max-width: 450px; margin: 0 auto; padding: 30px; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); }

        /* --- تصميم التقرير الرسمي (مطابق للـ PDF) --- */
        #official-report { 
            display: none; /* مخفي في الموقع ويظهر في الطباعة */
            width: 210mm; min-height: 297mm; padding: 15mm; margin: auto; background: white; color: #000;
        }
        .report-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; border-bottom: 1px solid #000; padding-bottom: 10px; }
        .header-titles { text-align: center; flex-grow: 1; }
        .header-titles h2 { margin: 0; font-size: 1.4rem; font-weight: bold; }
        .header-titles p { margin: 0; font-size: 1rem; color: #333; }

        .data-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .data-table td { border: 1px solid #000; padding: 8px 12px; font-size: 0.9rem; vertical-align: middle; }
        .label-en { text-align: left; width: 20%; font-weight: 500; }
        .label-ar { text-align: right; width: 20%; font-weight: 500; }
        .value-cell { text-align: center; width: 60%; font-weight: bold; background: #fafafa; }

        .footer-logos { margin-top: 40px; display: flex; justify-content: space-between; align-items: flex-end; border-top: 1px solid #000; padding-top: 15px; }
        .verification-info { font-size: 0.75rem; line-height: 1.5; }

        /* إعدادات الطباعة */
        @media print {
            @page { size: A4; margin: 0; }
            .no-print { display: none !important; }
            #official-report { display: block !important; margin: 0; width: 100%; padding: 20mm; }
            body { background: white; }
        }
    </style>
</head>
<body>

<div class="no-print">
    <div class="header-web">
        <div style="font-size: 24px; color: #ccc;">☰</div>
        <img src="https://www.seha.sa/assets/images/logo.png" height="40">
    </div>

    <div class="hero-web">
        <h2 style="color: #2c5ba3; font-weight: 700;">الإجازات المرضية</h2>
        <p class="text-muted">أدخل البيانات للتحقق وطباعة التقرير الرسمي</p>
        
        <div class="search-card">
            <input type="text" id="codeIn" class="form-control mb-3" placeholder="رمز الخدمة (GSL...)">
            <input type="text" id="idIn" class="form-control mb-3" placeholder="رقم الهوية / الإقامة">
            <button class="btn btn-primary w-100 py-2" onclick="generateReport()">استعلام وعرض التقرير</button>
            
            <div id="print-btn-container" style="display:none;" class="mt-3">
                <button class="btn btn-success w-100" onclick="window.print()">اضغط هنا للطباعة (نسخة الـ PDF)</button>
            </div>
        </div>
    </div>
</div>

<div id="official-report">
    <div class="report-header">
        <div style="text-align: right;">
            <p><strong>صحة</strong></p>
            <p>Seha</p>
        </div>
        <div class="header-titles">
            <h2>تقرير إجازة مرضية</h2>
            <p>Sick Leave Report</p>
        </div>
        <div style="text-align: left;">
            <p>المملكة العربية السعودية</p>
            <p>Kingdom of Saudi Arabia</p>
        </div>
    </div>

    <table class="data-table">
        <tr>
            <td class="label-en">Leave ID</td>
            <td class="value-cell" id="v-id"></td>
            <td class="label-ar">رمز الإجازة</td>
        </tr>
        <tr>
            <td class="label-en">Leave Duration</td>
            <td class="value-cell" id="v-dur"></td>
            <td class="label-ar">مدة الإجازة</td>
        </tr>
        <tr>
            <td class="label-en">Admission Date</td>
            <td class="value-cell" id="v-adm"></td>
            <td class="label-ar">تاريخ الدخول</td>
        </tr>
        <tr>
            <td class="label-en">Discharge Date</td>
            <td class="value-cell" id="v-dis"></td>
            <td class="label-ar">تاريخ الخروج</td>
        </tr>
        <tr>
            <td class="label-en">Issue Date</td>
            <td class="value-cell" id="v-iss"></td>
            <td class="label-ar">تاريخ إصدار التقرير</td>
        </tr>
        <tr>
            <td class="label-en">Name</td>
            <td class="value-cell" id="v-name"></td>
            <td class="label-ar">الاسم</td>
        </tr>
        <tr>
            <td class="label-en">National ID</td>
            <td class="value-cell" id="v-nid"></td>
            <td class="label-ar">رقم الهوية</td>
        </tr>
        <tr>
            <td class="label-en">Nationality</td>
            <td class="value-cell" id="v-nat"></td>
            <td class="label-ar">الجنسية</td>
        </tr>
        <tr>
            <td class="label-en">Employer</td>
            <td class="value-cell" id="v-emp"></td>
            <td class="label-ar">جهة العمل</td>
        </tr>
        <tr>
            <td class="label-en">Practitioner</td>
            <td class="value-cell" id="v-doc"></td>
            <td class="label-ar">اسم الممارس</td>
        </tr>
    </table>

    <div class="footer-logos">
        <div class="verification-info">
            <p><strong>وزارة الصحة - مستشفى الملك سلمان</strong></p>
            <p>للتحقق من بيانات التقرير يرجى زيارة منصة صحة الرسمية</p>
            <p>www.seha.sa/#/inquiries/slenquiry</p>
        </div>
        <div style="text-align: left;">
            <img src="https://upload.wikimedia.org/wikipedia/ar/thumb/8/82/Ministry_of_Health_Logo.svg/1200px-Ministry_of_Health_Logo.svg.png" height="50">
            <p style="font-size: 0.7rem; margin-top: 5px;">المركز الوطني للمعلومات الصحية</p>
        </div>
    </div>
</div>

<script>
    // البيانات المسحوبة من ملف خالد البواردي المرفق
    const database = [
        {
            id: "GSL25090349228",
            dur: "1 day (03-09-2025 to 03-09-2025)",
            adm: "03-09-2025",
            dis: "03-09-2025",
            iss: "03-09-2025",
            name: "خالد بن عبد الله بن مسفر البواردي",
            nid: "1125966687",
            nat: "السعودية - Saudi Arabia",
            emp: "جامعه الامام محمد بن سعود",
            doc: "بلال الجفري - طبيب عام"
        }
    ];

    function generateReport() {
        const c = document.getElementById('codeIn').value;
        const i = document.getElementById('idIn').value;
        const match = database.find(x => x.id === c && x.nid === i);

        if(match) {
            document.getElementById('v-id').innerText = match.id;
            document.getElementById('v-dur').innerText = match.dur;
            document.getElementById('v-adm').innerText = match.adm;
            document.getElementById('v-dis').innerText = match.dis;
            document.getElementById('v-iss').innerText = match.iss;
            document.getElementById('v-name').innerText = match.name;
            document.getElementById('v-nid').innerText = match.nid;
            document.getElementById('v-nat').innerText = match.nat;
            document.getElementById('v-emp').innerText = match.emp;
            document.getElementById('v-doc').innerText = match.doc;
            
            document.getElementById('print-btn-container').style.display = 'block';
            alert("تم تجهيز التقرير بنجاح. اضغط على زر الطباعة الأخضر للمعاينة.");
        } else {
            alert("البيانات غير صحيحة. استخدم البيانات الموجودة في ملف الـ PDF المرفق.");
        }
    }
</script>
</body>
</html>
